{"version":3,"file":"gnss.esm.js","sources":["../src/event-emitter.js","../src/index.js"],"sourcesContent":["/**\n * EventEmitter - Simple event system for component communication\n */\nexport class EventEmitter {\n  constructor() {\n    this.events = {};\n    this.debugMode = false;\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {string} event - Event name\n   * @param {Function} listener - Callback function\n   * @returns {Function} Unsubscribe function\n   */\n  on(event, listener) {\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n    \n    this.events[event].push(listener);\n    \n    // Return unsubscribe function\n    return () => {\n      this.events[event] = this.events[event].filter(l => l !== listener);\n    };\n  }\n  \n  /**\n   * Modern DOM-style event subscription (alias for on)\n   * @param {string} event - Event name\n   * @param {Function} listener - Callback function\n   */\n  addEventListener(event, listener) {\n    return this.on(event, listener);\n  }\n\n  /**\n   * Subscribe to an event once\n   * @param {string} event - Event name\n   * @param {Function} listener - Callback function\n   */\n  once(event, listener) {\n    const remove = this.on(event, (...args) => {\n      remove();\n      listener(...args);\n    });\n  }\n\n  /**\n   * Emit an event with data\n   * @param {string} event - Event name\n   * @param {*} data - Event data\n   */\n  emit(event, data) {\n    if (this.debugMode) {\n      console.log(`[EventEmitter] ${event}:`, data);\n    }\n    \n    if (this.events[event]) {\n      this.events[event].forEach(listener => {\n        try {\n          listener(data);\n        } catch (error) {\n          console.error(`Error in event listener for '${event}':`, error);\n        }\n      });\n    }\n  }\n\n  /**\n   * Remove a specific listener for an event\n   * @param {string} event - Event name\n   * @param {Function} listener - Callback function to remove\n   */\n  off(event, listener) {\n    if (this.events[event]) {\n      this.events[event] = this.events[event].filter(l => l !== listener);\n    }\n  }\n  \n  /**\n   * Modern DOM-style event unsubscription (alias for off)\n   * @param {string} event - Event name\n   * @param {Function} listener - Callback function to remove\n   */\n  removeEventListener(event, listener) {\n    return this.off(event, listener);\n  }\n  \n  /**\n   * Remove all listeners for an event\n   * @param {string} event - Event name\n   */\n  removeAllListeners(event) {\n    if (event) {\n      delete this.events[event];\n    } else {\n      this.events = {};\n    }\n  }\n\n  /**\n   * Enable/disable debug mode\n   * @param {boolean} enabled - Whether debug mode is enabled\n   */\n  setDebug(enabled) {\n    this.debugMode = enabled;\n  }\n}\n\n// For backward compatibility\nexport default EventEmitter;","/**\n * GNSS Module - Main entry point\n * \n * This module provides a JavaScript interface for connecting to GNSS RTK rovers\n * via Web Bluetooth or Web Serial, parsing NMEA data, and managing NTRIP correction data.\n */\nimport { EventEmitter } from './event-emitter.js';\n\n/**\n * Main GNSS Module class\n * Manages device connections, NMEA parsing, and NTRIP client\n */\nclass GnssModule {\n  /**\n   * Create a new GNSS module instance\n   * @param {Object} options - Configuration options\n   */\n  constructor(options = {}) {\n    // Initialize event system\n    this.events = new EventEmitter();\n    \n    // Initialize other properties\n    this.debugSettings = options.debugSettings || {\n      info: false,\n      debug: false,\n      errors: true,\n      parsedSentences: false,\n      rtcmMessages: false\n    };\n    \n    // Last known position\n    this.currentPosition = null;\n  }\n  \n  /**\n   * Set up internal event listeners\n   * @private\n   */\n  _setupEventListeners() {\n    // To be implemented as components are added\n  }\n  \n  /**\n   * Connect to a GNSS device using available methods\n   * @param {Object} options - Connection options\n   * @returns {Promise<boolean>} Connection success\n   */\n  async connectDevice(options = {}) {\n    console.log('connectDevice not yet implemented');\n    return false;\n  }\n  \n  /**\n   * Connect to NTRIP caster\n   * @param {Object} options - Connection options\n   * @returns {Promise<boolean>} Connection success\n   */\n  async connectNtrip(options = {}) {\n    console.log('connectNtrip not yet implemented');\n    return false;\n  }\n  \n  /**\n   * Disconnect from device\n   * @returns {Promise<void>}\n   */\n  async disconnectDevice() {\n    console.log('disconnectDevice not yet implemented');\n  }\n  \n  /**\n   * Disconnect from NTRIP\n   * @returns {Promise<void>}\n   */\n  async disconnectNtrip() {\n    console.log('disconnectNtrip not yet implemented');\n  }\n  \n  /**\n   * Get current position\n   * @returns {Object|null} Current position\n   */\n  getPosition() {\n    return this.currentPosition;\n  }\n  \n  /**\n   * Get satellite information\n   * @returns {Array|null} Satellite information\n   */\n  getSatellites() {\n    return [];\n  }\n  \n  /**\n   * Subscribe to an event\n   * @param {string} event - Event name\n   * @param {Function} callback - Callback function\n   * @returns {Function} Unsubscribe function\n   */\n  on(event, callback) {\n    return this.events.on(event, callback);\n  }\n  \n  /**\n   * Unsubscribe from an event\n   * @param {string} event - Event name\n   * @param {Function} callback - Callback function\n   */\n  off(event, callback) {\n    this.events.off(event, callback);\n  }\n}\n\n// Export the main module class\nexport { GnssModule };\n\n// Export EventEmitter for extensibility\nexport { EventEmitter };\n\n// Export default GnssModule for backward compatibility\nexport default GnssModule;"],"names":[],"mappings":"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"}